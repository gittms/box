//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30128.1
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using Definitif;
using Definitif.Data;
using Definitif.Data.Queries;
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Common;


namespace Definitif.Test {
    
    /// <summary>
    /// Represents test person object.
    /// </summary>
    public partial class TestPerson : Model<Definitif.Test.Mappers.TestPerson> {

        /// <summary>
        /// Gets TestPerson instance from database by given Id.
        /// </summary>
        public static TestPerson Get(Id id) {
            return TestPerson.Mapper.Read(id);
        }

        public class TestPersonTableScheme : ModelTableScheme<Definitif.Test.Mappers.TestPerson> {
            public TestPersonTableScheme() {
                
            }

            private Column p_username = table["UserName"];
            public Column UserName { get { return p_username; } }
        }

        private static TestPersonTableScheme tableScheme = new TestPersonTableScheme();
        /// <summary>
        /// Gets TestPerson model table scheme.
        /// </summary>
        public new TestPersonTableScheme C {
            get {
                return tableScheme;
            }
        }
        /// <summary>
        /// Represents mapped username property.
        /// </summary>
        public string UserName {
            get { return p_username; }
            set { p_username = value; }
        }
        protected string p_username;
        /// <summary>
        /// Represents static property with custom body.
        /// </summary>
        public static bool StaticProperty {
            get { return true; }
        }

    }
}
namespace Definitif.Test.Mappers {
    
    public partial class TestPerson : Mapper<Definitif.Test.TestPerson> {

        public TestPerson()
        {
            this.database = global::Core.Database;
            this.table = this.database["Persons"];
        }

        public sealed override Definitif.Test.TestPerson ReadObject(IDataReader reader)
        {
            Definitif.Test.TestPerson result = new Definitif.Test.TestPerson()
            {
                UserName = (string)reader["UserName"],
            };
            FillBase(result, reader);
            return result;
        }
        public sealed override Definitif.Test.TestPerson ReadObject(IDataReader reader, string fieldPrefix)
        {
            Definitif.Test.TestPerson result = new Definitif.Test.TestPerson()
            {
                UserName = (string)reader[fieldPrefix + "UserName"],
            };
            FillBase(result, reader, fieldPrefix);
            return result;
        }

        protected sealed override List<DbCommand> InsertCommands(Definitif.Test.TestPerson obj) {
            List<DbCommand> list = new List<DbCommand> {
                this.database.GetCommand(
                    new Insert<Definitif.Test.TestPerson>()
                        .Values(m =>
                            m.C.UserName == obj.UserName))
            };
            this.InsertCommandsExtension(obj, list);
            return list;
        }
        partial void InsertCommandsExtension(Definitif.Test.TestPerson obj, List<DbCommand> list);

        protected sealed override List<DbCommand> UpdateCommands(Definitif.Test.TestPerson obj) {
            List<DbCommand> list = new List<DbCommand> {
                this.database.GetCommand(
                    new Update<Definitif.Test.TestPerson>()
                        .Values(m =>
                            m.C.Version == obj.Version + 1 &
                            m.C.UserName == obj.UserName)
                        .Where(m =>
                            m.C.Id == obj.Id.Value &
                            m.C.Version == obj.Version))
            };
            this.UpdateCommandsExtension(obj, list);
            return list;
        }
        partial void UpdateCommandsExtension(Definitif.Test.TestPerson obj, List<DbCommand> list);

        protected sealed override List<DbCommand> DeleteCommands(Definitif.Test.TestPerson obj) {
            List<DbCommand> list = new List<DbCommand> {
                this.database.GetCommand(
                    new Delete<Definitif.Test.TestPerson>()
                        .Where(m =>
                            m.C.Id == obj.Id.Value &
                            m.C.Version == obj.Version))
            };
            this.DeleteCommandsExtension(obj, list);
            return list;
        }
        partial void DeleteCommandsExtension(Definitif.Test.TestPerson obj, List<DbCommand> list);

    }
}
